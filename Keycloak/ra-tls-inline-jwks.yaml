apiVersion: security.istio.io/v1
kind: RequestAuthentication
metadata:
  name: httpbin-authn
  namespace: sample
spec:
  selector:
    matchLabels:
      app: httpbin
  jwtRules:
  - issuer: "https://keycloak.192.168.56.102.nip.io/realms/demo"
    jwks: |
     {"keys":[{"kid":"2nH1DTevJ0GSLPv4E9Zjq5w8aUjcpMSM3fKgqOeeALk","kty":"RSA","alg":"RSA-OAEP","use":"enc","x5c":["MIIClzCCAX8CBgGZ39SEHTANBgkqhkiG9w0BAQsFADAPMQ0wCwYDVQQDDARkZW1vMB4XDTI1MTAxMzIzMDYxMFoXDTM1MTAxMzIzMDc1MFowDzENMAsGA1UEAwwEZGVtbzCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALGHDTaknw9QfJMYHWdhobQk/NGXWgB7ixDib8jQ5hLgyMwP8nJ4RBt6Y+PHv3Av77ER4EUFX3HdbNHBzysTlRElGYDwG3nn/W6aOxFyFCSZlYgfljBk2QN10EeSN9SP3jBXI/MT9yrZ9qea1chQbATdoCn6ubYux039nuLxfxSdhqzEBtsRqHOHOgOVG60jseNCtau/ht0FesOaR6DQ5/dXQT2NbdNSGgNgHv170oRnkfALVCdUroKmH0o2zBH8qgxjZkfTqkXaxIyaGwvh1GVM629VbZ85NsWlqoQstURWzy1QxK4frLdqsy4db+Kpl5F1Or8K9ZOsOOur4aj9AI0CAwEAATANBgkqhkiG9w0BAQsFAAOCAQEAH3S4pLnFt7i6rDrFbR6rfeBkXsHsRkqvSxdpwOrBRteUq1YVHjsTdiSu1JLYYwFQzQ91UToe86w3ZFXFJedUA/Ro+kV3Yc7alCZc7D8Sp2qOIFxFAuL2IJXyZOwnBPOJ53Sfczuhe0ElnB5Dkph6ntyXIwAnFd7yRex//i+bo4AxA/UlZJiTrYSDkmx8TxZm63zeK4pb0aGBLnCAiDJDLbd6m2XizI9FW2780mO9/xwMCvOpQB9IKT7QyiCi3bKjUiBO3Yq0Wc5T9TijX9L8O5kTe1moYtTlxH7rT8SnKVypLlNVzwk0DzGPSv+F0WUsLmb/LW/UHkTNX9OimrJPVA=="],"x5t":"noM-WE-auEEclHwEgdoOXzcq0hM","x5t#S256":"fYtzQLl0XuC8eSb416quM6Dzq0iag5axl8955IHv4SA","n":"sYcNNqSfD1B8kxgdZ2GhtCT80ZdaAHuLEOJvyNDmEuDIzA_ycnhEG3pj48e_cC_vsRHgRQVfcd1s0cHPKxOVESUZgPAbeef9bpo7EXIUJJmViB-WMGTZA3XQR5I31I_eMFcj8xP3Ktn2p5rVyFBsBN2gKfq5ti7HTf2e4vF_FJ2GrMQG2xGoc4c6A5UbrSOx40K1q7-G3QV6w5pHoNDn91dBPY1t01IaA2Ae_XvShGeR8AtUJ1SugqYfSjbMEfyqDGNmR9OqRdrEjJobC-HUZUzrb1Vtnzk2xaWqhCy1RFbPLVDErh-st2qzLh1v4qmXkXU6vwr1k6w466vhqP0AjQ","e":"AQAB"},{"kid":"Wyb7Mf6wYJVwEIhPyMjpgHCd6rVFF3W16Qu2dIMTuTw","kty":"RSA","alg":"RS256","use":"sig","x5c":["MIIClzCCAX8CBgGZ39SApDANBgkqhkiG9w0BAQsFADAPMQ0wCwYDVQQDDARkZW1vMB4XDTI1MTAxMzIzMDYwOVoXDTM1MTAxMzIzMDc0OVowDzENMAsGA1UEAwwEZGVtbzCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAK38TZ9LEwgmWA1VSi7f6CWe1ZHEA78WJXo0qBNF0kOcGOU+sovRjH+HfBbSQuvhtL8OOcLoNarUbKSf3zbigbQRwMe/6lKT1WYhKlCtn0k6k7mMoUqg2m8N4zYhfUS6uHyzDIWGIJEpMG/HB+uXvgmngeLeZJbAyRznFZq31JFnenqZynKBMR5yD600h7I46U4c77QecMHx96tbsruVrdqPssDff4ceHXv32J80sXPHbzI6Xw1GyQZZR12WzvrLsOqs/TZ/h2/bQ03XJ2twNmSOMfbCfgWsW1O9ny0eZFD0faVEpU8bsMatGT5+siBLTpW9e+/THQpVia45/2pmKncCAwEAATANBgkqhkiG9w0BAQsFAAOCAQEAe+ooFvSiWkxxqBV3sVdsN7rsBaEZzU17CbmHx/QxceC1JJmBjzU/lSW9cA8whuEbIHEMk+91hG8eSzTyg6ORWVNl6gKnW5bM7szUGfnawVYaNLWThpS8OEy9P2HxHPjOiB7ZoPNpZIGeZ8DiDcLWUsTBO87fZSOrOLm2AdUCqoLqo00UrR9f5P7UVf4OUziCd+kaljRfcDPdHB/T21tCXcQ6eAG5Cmx7ZWuYYX/mz7JZpm0Yw2yOPg/c637nsfekHlZV6K2kYdzhUh3xVaa3osQ7KdzacoVe5vtMP1WsKop7ytRrzIrHcJGwGAnHHDxfI01QUlJgNw94WcoE6wU6Dg=="],"x5t":"SoArHO8eYUXVz9OE2z8_4TvmPF4","x5t#S256":"YaNRiyBSka7ZdsS5ky0L31zaTpWWuYIz2avDb_6TgC0","n":"rfxNn0sTCCZYDVVKLt_oJZ7VkcQDvxYlejSoE0XSQ5wY5T6yi9GMf4d8FtJC6-G0vw45wug1qtRspJ_fNuKBtBHAx7_qUpPVZiEqUK2fSTqTuYyhSqDabw3jNiF9RLq4fLMMhYYgkSkwb8cH65e-CaeB4t5klsDJHOcVmrfUkWd6epnKcoExHnIPrTSHsjjpThzvtB5wwfH3q1uyu5Wt2o-ywN9_hx4de_fYnzSxc8dvMjpfDUbJBllHXZbO-suw6qz9Nn-Hb9tDTdcna3A2ZI4x9sJ-BaxbU72fLR5kUPR9pUSlTxuwxq0ZPn6yIEtOlb1779MdClWJrjn_amYqdw","e":"AQAB"}]} 
     # jwks from curl -sk https://keycloak.$VIP.nip.io/realms/demo/protocol/openid-connect/certs -o jwks-demo.json
